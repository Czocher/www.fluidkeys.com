<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Enable pinentry mode 'loopback' on GnuPG 2.1.11</title>
    <link rel="alternate" type="application/atom+xml" title="Fluidkeys Blog" href="/blog/feed.xml" />
          <meta name="description" content="Fluidkeys makes it easy to implement the best security practices and demonstrate your team's expertise with PGP. Sign up now!" />

    <link href="https://fonts.googleapis.com/css?family=Merriweather:400,900|Montserrat:500,700|Inconsolata" rel="stylesheet">
    <link href="../stylesheets/site.css" rel="stylesheet" />
    <link href="../stylesheets/pre-terminal.css" rel="stylesheet" />
  </head>
  <body id="">
    <header>
      <h1><a href="/">Fluidkeys</a></h1>
      <nav>
        <ul>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/weeknotes">Weeknotes</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="https://download.fluidkeys.com">Download</a></li>
        </ul>
      </nav>
    </header>
        <div class="full-width">
        <section class="variable-width-container">
            <h1>Enable pinentry mode &#39;loopback&#39; on GnuPG 2.1.11</h1>

<p>Add this line to <code>~/.gnupg/gpg-agent.conf</code>:</p>

<pre><code>allow-loopback-pinentry
</code></pre>

<p>Then restart <code>gpg-agent</code>:</p>

<pre><code>$ gpgconf --reload gpg-agent
</code></pre>

<p>That&#39;s all ðŸ™Œ</p>

<hr>

<h2>Fluidkeys uses loopback mode to maintain keys automatically</h2>

<p>Loopback mode allows Fluidkeys to send a password directly to GnuPG, rather
than GnuPG itself prompting for the password.</p>

<p>This lets Fluidkeys store the password in the system keyring, then run automatic maintenance from cron (see <code>fk key maintain automatic</code>)</p>

<p>Unfortunately GnuPG 2.1.11 throws an error if you try to use loopback mode:</p>

<pre><code>gpg: setting pinentry mode &#39;loopback&#39; failed: Not supported
</code></pre>

<p>This was <a href="https://lists.gt.net/gnupg/devel/77927#77927">fixed in GnuPG 2.1.12</a>, but if you&#39;re using Ubuntu 16.04 you&#39;re stuck with the affected version.</p>

        </section>
    </div>

    <footer>
      <div class="content">
        <p>
          <a href="mailto:hello@fluidkeys.com">hello@fluidkeys.com</a>
          <a href="/blog/feed.xml"><img src="../images/rss-icon.svg" class="rss-icon" alt="Rss icon" />RSS feed</a>
        </p>
      </div>
    </footer>
    <script>
  var dnt = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
  if (dnt != "1" && dnt != "yes") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-121440356-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  } else {
    console.debug("Respecting Do-Not-Track, not loading analytics. See https://www.paulfurley.com/google-analytics-dnt/");
  }
</script>
  </body>
</html>
